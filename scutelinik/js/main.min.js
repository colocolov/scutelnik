const servicesBtn=document.querySelector(".services__btn"),servicesAll=document.querySelector(".services__all"),works=document.querySelector(".works");function DynamicAdapt(e){this.type=e}servicesBtn&&servicesBtn.addEventListener("click",(function(e){servicesBtn.classList.toggle("active"),servicesAll.classList.toggle("active"),works.classList.toggle("active"),servicesBtn.classList.contains("active")?servicesBtn.textContent="Закрыть":servicesBtn.textContent="Все услуги"})),DynamicAdapt.prototype.init=function(){const e=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=document.querySelectorAll("[data-da]");for(let e=0;e<this.nodes.length;e++){const t=this.nodes[e],n=t.dataset.da.trim().split(","),i={};i.element=t,i.parent=t.parentNode,i.destination=document.querySelector(n[0].trim()),i.breakpoint=n[1]?n[1].trim():"767",i.place=n[2]?n[2].trim():"last",i.index=this.indexInParent(i.parent,i.element),this.оbjects.push(i)}this.arraySort(this.оbjects),this.mediaQueries=Array.prototype.map.call(this.оbjects,(function(e){return"("+this.type+"-width: "+e.breakpoint+"px),"+e.breakpoint}),this),this.mediaQueries=Array.prototype.filter.call(this.mediaQueries,(function(e,t,n){return Array.prototype.indexOf.call(n,e)===t}));for(let t=0;t<this.mediaQueries.length;t++){const n=this.mediaQueries[t],i=String.prototype.split.call(n,","),o=window.matchMedia(i[0]),r=i[1],a=Array.prototype.filter.call(this.оbjects,(function(e){return e.breakpoint===r}));o.addListener((function(){e.mediaHandler(o,a)})),this.mediaHandler(o,a)}},DynamicAdapt.prototype.mediaHandler=function(e,t){if(e.matches)for(let e=0;e<t.length;e++){const n=t[e];n.index=this.indexInParent(n.parent,n.element),this.moveTo(n.place,n.element,n.destination)}else for(let e=0;e<t.length;e++){const n=t[e];n.element.classList.contains(this.daClassname)&&this.moveBack(n.parent,n.element,n.index)}},DynamicAdapt.prototype.moveTo=function(e,t,n){t.classList.add(this.daClassname),"last"===e||e>=n.children.length?n.insertAdjacentElement("beforeend",t):"first"!==e?n.children[e].insertAdjacentElement("beforebegin",t):n.insertAdjacentElement("afterbegin",t)},DynamicAdapt.prototype.moveBack=function(e,t,n){t.classList.remove(this.daClassname),void 0!==e.children[n]?e.children[n].insertAdjacentElement("beforebegin",t):e.insertAdjacentElement("beforeend",t)},DynamicAdapt.prototype.indexInParent=function(e,t){const n=Array.prototype.slice.call(e.children);return Array.prototype.indexOf.call(n,t)},DynamicAdapt.prototype.arraySort=function(e){"min"===this.type?Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:e.place-t.place:e.breakpoint-t.breakpoint})):Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:t.place-e.place:t.breakpoint-e.breakpoint}))};const da=new DynamicAdapt("max");da.init();const form=document.querySelector(".footer__form"),telSelector=form.querySelector('input[type="tel"]'),inputMask=new Inputmask("+373 (99) 999-999");inputMask.mask(telSelector);const validation=new JustValidate("#fform");validation.addField("#name",[{rule:"minLength",value:3,errorMessage:"Минимальная длина имени: 3 буквы"},{rule:"maxLength",value:30,errorMessage:"Имя слишком длинное!"},{rule:"required",value:!0,errorMessage:"Введите имя!"}]).addField("#telephone",[{rule:"required",value:!0,errorMessage:"Введите телефон!"},{rule:"function",validator:function(){return 8===telSelector.inputmask.unmaskedvalue().length},errorMessage:"Введите корректный номер телефона!"}]).onSuccess(e=>{const t=new FormData(e.target),n={};var i;t.forEach((e,t)=>{n[t]=e}),(i=n,fetch("send.php",{method:"POST",body:JSON.stringify(i),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(e=>e.json())).then(e=>{}),e.target.reset(),setTimeout((function(){document.querySelector('div[class="modal"]').classList.add("active"),document.body.classList.add("_lock")}),500)});const modal=document.querySelector(".modal"),modalBtn=document.querySelector(".modal__btn");modal.addEventListener("click",e=>{e.target.closest(".modal__inner")||(modal.classList.remove("active"),document.body.classList.remove("_lock"))}),modalBtn.addEventListener("click",e=>{modal.classList.remove("active"),document.body.classList.remove("_lock")});const isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};function documentActions(e){const t=e.target;if(window.innerWidth>768&&isMobile.any()&&(t.classList.contains("nav__link")&&t.closest(".nav__item").classList.toggle("_hover"),!t.closest(".nav__item")&&document.querySelectorAll(".nav__item._hover").length>0)){document.querySelector(".nav__item._hover").classList.remove("_hover")}if(window.innerWidth>768&&isMobile.any()&&(t.closest(".nav__arrow")&&!t.closest(".sub-menu")&&(e.preventDefault(),t.closest(".nav__item").classList.toggle("_hover")),!t.closest(".nav__item")&&document.querySelectorAll(".nav__item._hover").length>0)){document.querySelector(".nav__item._hover").classList.remove("_hover")}}isMobile.any()&&document.body.classList.add("_touch"),document.addEventListener("click",documentActions);const header=document.querySelector(".header"),iconMenu=document.querySelector(".nav__icon"),menuBody=document.querySelector(".nav__body"),menuList=document.querySelector(".nav__list"),menuArrow=document.querySelector(".nav__arrow > a"),menuLink=document.querySelectorAll(".nav__item");iconMenu&&iconMenu.addEventListener("click",(function(e){document.body.classList.toggle("_lock"),iconMenu.classList.toggle("_active"),menuBody.classList.toggle("_active"),menuList.classList.toggle("_active"),menuArrow.remove()})),menuLink.forEach((e,t)=>{e.addEventListener("click",()=>{document.body.classList.remove("_lock"),iconMenu.classList.remove("_active"),menuBody.classList.remove("_active"),menuList.classList.remove("_active")})});